<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="date" content="2018-11-20" />

<title>UTDEventData: Extracting and aggregating event data from the UTD server</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">UTDEventData: Extracting and aggregating event data from the UTD server</h1>
<h4 class="author"><em>Dr. Patrick T. Brandt</em></h4>
<address class="author_afil">
The University of Texass at Dallas<br><a class="author_email" href="mailto:#"><a href="mailto:pbrandt@utdallas.edu">pbrandt@utdallas.edu</a></a>
</address>
<h4 class="author"><em>Dr. Vito D’Orazio</em></h4>
<address class="author_afil">
The University of Texass at Dallas<br><a class="author_email" href="mailto:#"><a href="mailto:dorazio@utdallas.edu">dorazio@utdallas.edu</a></a>
</address>
<h4 class="author"><em>Hyoungah (Kate) Kim</em></h4>
<address class="author_afil">
The University of Texass at Dallas<br><a class="author_email" href="mailto:#"><a href="mailto:hyoungah.kim@utdallas.edu">hyoungah.kim@utdallas.edu</a></a>
</address>
<h4 class="author"><em>Jared Looper</em></h4>
<address class="author_afil">
The University of Texass at Dallas<br><a class="author_email" href="mailto:#"><a href="mailto:jrl140030@utdallas.edu">jrl140030@utdallas.edu</a></a>
</address>
<h4 class="author"><em>Micheal J. Shoemate</em></h4>
<address class="author_afil">
The University of Texass at Dallas<br><a class="author_email" href="mailto:#"><a href="mailto:michael.shoemate@utdallas.edu">michael.shoemate@utdallas.edu</a></a>
</address>
<h4 class="date"><em>2018-11-20</em></h4>



<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>This R package allows users to extract a data set from the API Event Data server at the University of Texas at Dallas (UTD). The project of the UTDEventData R package is in progress and has been upadated day by day. Your comments, feedback, and suggestions are welcome so that more user friendly methods are prepared in the package. If you have questions in using the package, please contact Kate Kim (<a href="mailto:hyoungah.kim@utdallas.edu">hyoungah.kim@utdallas.edu</a>) at UTD.</p>
<p>This package requires you to have an API key to access to the UTD data server. Please find the following link and fill out the form to obtain an API key: <a href="http://eventdata.utdallas.edu/signup" class="uri">http://eventdata.utdallas.edu/signup</a>.</p>
<p>You can install the package from the UTDEventData github page in R with the following syntax.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install the package without the vignette</span>
devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;KateHyoung/UTDEventData&quot;</span>)

<span class="co"># install the package with the vignette</span>
devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;KateHyoung/UTDEventData&quot;</span>, <span class="dt">build_vignettes=</span><span class="ot">TRUE</span>)</code></pre></div>
<p>The UTD Event Data server has the five different event data tables.</p>
<pre><code>Table 1:  Data Table Information       </code></pre>
<table>
<thead>
<tr class="header">
<th>Data Table</th>
<th align="center">Timeline</th>
<th>Further Information</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Phoenix RT</td>
<td align="center">Oct. 2017 - Today</td>
<td><a href="http://openeventdata.org/">OEDA</a></td>
</tr>
<tr class="even">
<td>ICEWS</td>
<td align="center">1995 - Oct. 2018</td>
<td><a href="https://dataverse.harvard.edu/dataverse/icews">ICEWS Dataverse</a></td>
</tr>
<tr class="odd">
<td>Cline Phoenix NYT</td>
<td align="center">1945 - 2005</td>
<td><a href="http://www.clinecenter.illinois.edu/data/event/phoenix/">Cline Center</a></td>
</tr>
<tr class="even">
<td>Cline Phoenix FBIS</td>
<td align="center">1945 - 2005</td>
<td><a href="http://www.clinecenter.illinois.edu/data/event/phoenix/">Cline Center</a></td>
</tr>
<tr class="odd">
<td>Cline Phoenix SWB</td>
<td align="center">1979 - 2015</td>
<td><a href="http://www.clinecenter.illinois.edu/data/event/phoenix/">Cline Center</a></td>
</tr>
</tbody>
</table>
<p>The web links of each table provide the details of database, their entities, and attributes.</p>
<div id="computer-enviroments-this-package-has-tested" class="section level4">
<h4>Computer Enviroments This Package Has Tested</h4>
<p>The codes/functions in this documentation have been tested in the following versions of:</p>
<ul>
<li>Microsoft Open R 3.4.0</li>
<li>R-3.4.3 for Windows (32/64 bit)</li>
<li>OS X 10.12.2</li>
<li>R-2.4.3 for Mac</li>
</ul>
<p> </p>
</div>
</div>
<div id="functions" class="section level1">
<h1>Functions</h1>
<div id="searching-functions" class="section level2">
<h2>Searching functions</h2>
<p>There are two main searching functions in this package; exploring 1) a data table and 2) attributes in a table. With the searching functions, users can look up the name of data table and the list of variables in a specified data table.</p>
<p><code>DataTables()</code> returns the all data table names in the UTD server.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># returning all data table the server contains with entering an API key</span>
<span class="kw">DataTables</span>(<span class="dt">api_key =</span> <span class="st">&quot; &quot;</span>)
<span class="st">&quot;'PHOENIX_RT', 'CLINE_PHOENIX_SWB', 'CLINE_PHOENIX_FBIS', 'CLINE_PHOENIX_NYT', 'ICEWS'&quot;</span>

<span class="co"># Save an API key as a string value and use it so as not to repeat typing the key string </span>
<span class="co"># in other functions</span>
k&lt;-<span class="st">&quot;...api key....&quot;</span>
<span class="kw">DataTables</span>(k)
<span class="st">&quot;'PHOENIX_RT', 'CLINE_PHOENIX_SWB', 'CLINE_PHOENIX_FBIS', 'CLINE_PHOENIX_NYT', 'ICEWS'&quot;</span></code></pre></div>
<p><code>tableVar()</code> returns the list of variables (attributes) in a particulr data table a user specified in the function. For example, the variables in the Phoenix real-time (RT) data can be obtained as shown in the following example.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tableVar</span>(<span class="dt">api_key=</span><span class="st">&quot;...&quot;</span>, <span class="dt">table=</span><span class="st">&quot;phoenix_rt&quot;</span>)

<span class="co"># with the manner of using a saved API string to avoid the repeation of API key typing </span>
k&lt;-<span class="st">&quot;...api key....&quot;</span>
<span class="kw">tableVar</span>(k, <span class="st">&quot;Phoenix_rt&quot;</span>)

<span class="kw">tableVar</span>(k, <span class="st">&quot;Icews&quot;</span>)

<span class="kw">tableVar</span>(k, <span class="st">&quot;Cline_Phoenix_swb&quot;</span>)</code></pre></div>
<p>This function is <strong>not</strong> case sensitive, so a user may type either lower case or upper case of data table name. However, the full table name as returned by <code>Table()</code> should be entered in the function. For instance, <code>&quot;cline_Phoenix_swb&quot;</code> and <code>&quot;CLINE_PHOENIX_SWB&quot;</code> will return the same variables, but <code>&quot;cline_phenix&quot;</code> will return noting.</p>
<p>This function has another feature as being enable for a user to look up a particular variable in a data table. For example, one who may wonder the ICEWS data have a variable named “target” can type the string of the certain variable as follows;</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tableVar</span>(<span class="dt">api_key=</span><span class="st">&quot;...&quot;</span>, <span class="dt">table=</span><span class="st">&quot;icews&quot;</span>, <span class="dt">lword=</span><span class="st">&quot;target&quot;</span>)

<span class="co"># When a user wants to know the attribute that labeled as 'target' in ICEWS</span>
k &lt;-<span class="st"> &quot;..api key...&quot;</span>
<span class="kw">tableVar</span>(k, <span class="dt">table=</span><span class="st">&quot;icews&quot;</span>, <span class="dt">lword=</span><span class="st">&quot;target&quot;</span>)
<span class="st">&quot; Target Name&quot;</span>    <span class="st">&quot; Target Sectors&quot;</span>, ....</code></pre></div>
<p> </p>
</div>
<div id="subsetting-function-i" class="section level2">
<h2>Subsetting function I</h2>
<p><code>pullData()</code> returns a subset of data from a data table according to the information of country names and time ranges. Please note the corresponding time period of a certain data in Table 1. If the given time range in the function falls outside the timeline of a data table, the function will return <code>list()</code> as its result. That menas the requested data set is empty.</p>
<p>Please confirm the format of time range, which is “YYYYMMDD.”<br />
The country names can be either full names or the ISO-Alpha3 code. Please use a consistent format when you type countries names. We recommend the ISO-3 code format in order to reduce systemic errors in the function.</p>
<p>The function returns the citation texts for the publication and Bibtex formats at the end of data retrieval. If you do not want to have it, please turn off the option by choosing “FALSE” in the ‘citation’ option.</p>
<p>The following code is the possible examples you may use to obtain a data subset.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">pullData</span>(<span class="dt">api_key=</span><span class="st">&quot; &quot;</span>, <span class="dt">table_name=</span><span class="st">&quot;Phoenix_rt&quot;</span>, <span class="dt">country=</span><span class="kw">list</span>(<span class="st">&quot;USA&quot;</span>,<span class="st">&quot;MEX&quot;</span>,<span class="st">&quot;SYR&quot;</span>,<span class="st">&quot;CHN&quot;</span>), 
         <span class="dt">start=</span><span class="st">&quot;20171101&quot;</span>, <span class="dt">end=</span><span class="st">&quot;20171112&quot;</span>, <span class="dt">citation =</span> <span class="ot">TRUE</span>)

## several examples of different data tables with citation texts
k&lt;-<span class="st">'api key...'</span>
subset1 &lt;-<span class="st"> </span><span class="kw">pullData</span>(k, <span class="st">&quot;phoenix_rt&quot;</span>, <span class="kw">list</span>(<span class="st">'canada'</span>,<span class="st">'China'</span>), <span class="st">'20171101'</span>, <span class="st">'20171102'</span>)
subset2 &lt;-<span class="st"> </span><span class="kw">pullData</span>(k, <span class="st">&quot;icews&quot;</span>, <span class="kw">list</span>(<span class="st">'can'</span>, <span class="st">'usa'</span>), <span class="st">'20010101'</span>,<span class="st">'20010110'</span>)
subset3 &lt;-<span class="st"> </span><span class="kw">pullData</span>(k, <span class="st">'cline_Phoenix_NYT'</span>,<span class="kw">list</span>(<span class="st">'South Korea'</span>,<span class="st">'canada'</span>), 
                    <span class="st">'19551105'</span>,<span class="st">'19581215'</span>)

<span class="co"># without citation texts</span>
<span class="kw">pullData</span>(k, <span class="st">&quot;phoenix_rt&quot;</span>, <span class="kw">list</span>(<span class="st">'canada'</span>,<span class="st">'China'</span>), <span class="st">'20171101'</span>, <span class="st">'20171102'</span>, 
         <span class="dt">citation =</span> <span class="ot">FALSE</span>)</code></pre></div>
<div id="reference-class-for-appying-an-api-key-to-the-functions" class="section level3">
<h3>Reference class for appying an API key to the functions</h3>
<p>The pacakge has a reference class, named <code>Table()</code> of users not reapting the input of an API key into the searching and subsetting functions. Once a referece class is set, a user does not need to repeatedly input an API key into a function. Some basic usages are as follows;</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Creating an object</span>
obj&lt;-Table<span class="op">$</span><span class="kw">new</span>()

<span class="co"># Setting an object of an API key</span>
obj<span class="op">$</span><span class="kw">setAPIKey</span>(<span class="st">&quot;....&quot;</span>)
obj<span class="op">$</span><span class="kw">DataTables</span>()  <span class="co"># returns the available data tables in the UTD server</span>
obj<span class="op">$</span><span class="kw">tableVar</span>(<span class="st">&quot;cline_Phoenix_NYT&quot;</span>)

<span class="co"># when a user wants to subset real-time data ('phoenix_rt) from 20171101 to 20171102 </span>
<span class="co"># on MEX(Mexico)</span>
obj<span class="op">$</span><span class="kw">pullData</span>(<span class="st">&quot;Phoenix_rt&quot;</span>, <span class="kw">list</span>(<span class="st">&quot;MEX&quot;</span>),<span class="dt">start=</span><span class="st">&quot;20171101&quot;</span>, <span class="dt">end=</span><span class="st">&quot;20171102&quot;</span>)</code></pre></div>
<p>You can apply a reference class on the functions of <code>DataTables()</code>, <code>TableVar()</code>, and <code>pullData()</code> as well.</p>
<p> </p>
</div>
</div>
<div id="subsetting-functions-ii" class="section level2">
<h2>Subsetting functions II</h2>
<p>The package provides another method to obtain subsets from the UTD API server. These functions require users to have an API key to obtain data but provide more options as subsetting conditions. For instance, while <code>pullData()</code> function provides limited query options such as country names and time ranges of a data set, the group of subsetting functions II facilitate users more discretion in queries with more options such as contry names, time ranges, dyads of actors, latitute &amp; longitude of event locations, and source &amp; targets indications of certain events. By combining query blocks created by aforementioned features, users can retrieve data at thier own choices.<br />
The query blocks can be created and stored by its specific functions. To obtain data avoid error massages, users must acquaint each function’s usage illustrated in the help pages. The details how individual function works together with the other functions in the package will be illustrated in this section.</p>
<p>The subsetting function II consists of three groups. The first group of subsetting function II is creating qeury blocks according to user’s interests. The subsetting query blocks are the basis of subsetting information such as country names, locations (latitude and longitude), time ranges, a dyad relation, and so on. Moreover, a user can use any variable (attribute) in an API data table with the regular expression function, <code>returnRegExp()</code>.</p>
<p>The second group of the subsetting function II is connective functions of query blocks: <code>orList()</code> and <code>andList()</code>. These functions play a role of a logical operatior in combining query blocks as union and intersection respectively.</p>
<p>The last group of the subsetting function II is the data requesting method, which works with created query blocks: <code>sendQuery()</code>.</p>
<div id="query-block-functions" class="section level3">
<h3>Query block functions</h3>
<p><code>returnCountries()</code> is the function that creates the list of countreis names. The function requires users to specify the names of data table and countries a user is interested in. The ISO-3 Code format is recommended for the country names, but full country names can work in the function. The inputs are case-insensitive.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Generating a query of the United States and Canada as a country restraint</span>
ctr &lt;-<span class="st"> </span><span class="kw">returnCounries</span>(<span class="st">&quot;phoenix_rt&quot;</span>, <span class="kw">list</span>(<span class="st">&quot;USA&quot;</span>,<span class="st">&quot;CAN&quot;</span>))</code></pre></div>
<p><code>returnTimes()</code> is the function that generates a query to return all events between two time points. The format of typing time should be “YYYYMMDD” in the order of the start and the end points of the time range. A user must indentify a data table in the function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Generates a query to return all events between July 27, 1980, </span>
<span class="co"># and December 10, 2004</span>
time &lt;-<span class="st"> </span><span class="kw">returnTimes</span>(table_name,  <span class="st">&quot;19800727&quot;</span>, <span class="st">&quot;20041210&quot;</span>)</code></pre></div>
<p><code>returnLatLon()</code> returns the geo-location boundary a user specifies with latitudes and longitudes. This function does not require a data table name, but the input should be ordered by <code>lat1, lat2, log1, log2</code>. They are respectively the minimum and maximum values of the latitudes and minimum and maximum values of longtigudes of the boundary.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Generate a query with a geo-location bountry with the longitude between -80 and 30 </span>
<span class="co"># and the longitude between 20 and 80</span>
q &lt;-<span class="st"> </span><span class="kw">returnLatLon</span>(<span class="op">-</span><span class="dv">80</span>,<span class="dv">30</span>,<span class="dv">20</span>,<span class="dv">80</span>)</code></pre></div>
<p>The <code>returnDyad()</code> function creates a query of particular dyads of actors in countries. In the function, a user must specify a table name and source and target countries repectively. The ISO-3 codes for country names are recomended as function inputs, but full names of countries also work in this funtion. These inputs are not case-sensitive.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Genrate a query that a source country is Syria and a target country is the United States</span>
dyad &lt;-<span class="st"> </span><span class="kw">returnDyad</span>(table_name, <span class="st">&quot;SYR&quot;</span>, <span class="st">&quot;USA&quot;</span>)</code></pre></div>
<p><code>returnRegExp()</code> returns a regular expression for indicating the variables in the API data table. To use this function, a user must aware the variables in a certain data table. The variable list in a particular table can be found with the function of <code>tableVar()</code> in the package. The function requirs users to provide an API key, and a data table name, a pattern of interest events, and a field name (attribute or variable) in the data table.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Genrate a query for all source actors that involved in governments in events</span>
others &lt;-<span class="st"> </span><span class="kw">returnRegExp</span>( api_key, table_name,<span class="st">&quot;GOV&quot;</span>,<span class="st">&quot;Source Name&quot;</span>)</code></pre></div>
</div>
<div id="connectivive-functions" class="section level3">
<h3>Connectivive functions</h3>
<p>These functions play a role to connect several query blocks created by aforementioned functions. The two functions, <code>andList()</code> and <code>orList()</code>, work as logical operators, <strong>“and”</strong> and <strong>“or”</strong>, respectively.</p>
<p><code>andList()</code> is the function that returns the intersection of two or more query blocks. The stored queries should be specified in the <code>list()</code> format in the function.</p>
<p><code>orList()</code> returns a union of two or more query blocks. The stored queries should be specified in the <code>list()</code> format in the function as shown in the following examples.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># combine stored query blocks such as 'time' or 'q' created before</span>
and_query &lt;-<span class="st"> </span><span class="kw">andList</span>(<span class="kw">list</span>(q,time))

<span class="co"># subset with two or more stored query blocks such as 'q' or 'dyad'</span>
or_query &lt;-<span class="st"> </span><span class="kw">orList</span>(<span class="kw">list</span>(q,dyad))</code></pre></div>
</div>
<div id="data-request-function" class="section level3">
<h3>Data request function</h3>
<p>A data set can be retreived with the combinations generated with aforementioned functions. The <code>sendQuery()</code> function requests specified data to the API server with them. A user should input an API key, a data table, and a list of queries created by <code>andList()</code> or <code>orList()</code> in the function as shown in the following example code.</p>
<p>The function returns the citation texts of publication and Bibtex formats at the end of the extracted data. If you do not want to have it, please turn off the option by choosing “FALSE” in the method.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Request a data set with the list of created queries </span>
<span class="kw">sendQuery</span>(<span class="dt">api_key=</span><span class="st">''</span>, <span class="dt">tabl_name =</span><span class="st">''</span>, <span class="dt">query =</span> <span class="kw">list</span>(), <span class="dt">citation =</span> <span class="ot">TRUE</span>)

<span class="co"># Examples of subsetting functions</span>

<span class="co"># creating query blocks</span>
<span class="co"># A country constrain of 'CHN' and 'USA'</span>
k &lt;-<span class="st"> 'api_key'</span>
ctr &lt;-<span class="st"> </span><span class="kw">returnCountries</span>(<span class="st">&quot;phoenix_rt&quot;</span>,<span class="kw">list</span>(<span class="st">&quot;CHN&quot;</span>, <span class="st">&quot;USA&quot;</span>))

<span class="co"># A query of time between 2017-11-1 and 2017-11-5</span>
time &lt;-<span class="st"> </span><span class="kw">returnTimes</span>(<span class="st">&quot;phoenix_rt&quot;</span>,<span class="st">&quot;20171101&quot;</span>,<span class="st">&quot;20171105&quot;</span>)

<span class="co"># A boolean logic, or, with the two query blocks</span>
or_query &lt;-<span class="st"> </span><span class="kw">orList</span>(<span class="kw">list</span>(ctr, time))
<span class="co"># request a data set to the API server with the package citation</span>
d1 &lt;-<span class="st"> </span><span class="kw">sendQuery</span>(k,<span class="st">&quot;phoenix_rt&quot;</span>,or_query, <span class="ot">TRUE</span>)

<span class="co"># to view the subset</span>
<span class="kw">head</span>(d1<span class="op">$</span>data, <span class="dv">10</span>)

<span class="co"># A boolean logic, and, with the two query blocks</span>
and_query &lt;-<span class="st"> </span><span class="kw">andList</span>(<span class="kw">list</span>(ctr, time))
d2 &lt;-<span class="st"> </span><span class="kw">sendQuery</span>(k,<span class="st">&quot;phoenix_rt&quot;</span>,and_query, <span class="ot">TRUE</span>)

<span class="co"># To view the subset</span>
<span class="kw">head</span>(d2<span class="op">$</span>data, <span class="dv">10</span>)

<span class="co"># When a user wants to extract all event in US and China with the events for which </span>
<span class="co"># the source was a government actor from the Phoenix real-time table</span>
rgex&lt;-<span class="st"> </span><span class="kw">returnRegExp</span>(k, <span class="st">&quot;phoenix_rt&quot;</span>,<span class="st">&quot;GOV&quot;</span>, <span class="st">&quot;src_agent&quot;</span>)
q &lt;-<span class="st"> </span><span class="kw">andList</span>(<span class="kw">list</span>(ctr, rgex))
data  &lt;-<span class="st"> </span><span class="kw">sendQuery</span>(k,<span class="st">&quot;phoenix_rt&quot;</span>,q, <span class="dt">citation =</span> <span class="ot">FALSE</span>) <span class="co"># no citation</span>

<span class="co"># To view the data</span>
<span class="co"># because the option for citation was off, package's citation was not printed. </span>
<span class="kw">head</span>(data, <span class="dv">10</span>) </code></pre></div>
<p>Users can create several combinations of the query blocks with the other functions such as <code>returnLocation()</code> and <code>returnDyad()</code> according to thier interests in order to obtain prefered data sets.</p>
<p>Please note that an issue may occur if the large size of data are extracted by <code>sendQuery()</code>. More specifically, the issue can more frequently come with the <code>orList()</code> function, so using <code>orList()</code> with several query blocks may bring about the memory issue. Once the issue occurs, please increase a memory size allocated to your R program and re-run the functions. If a user keeps having the issue, please consider to use <code>pullData()</code> for data subsetting. <code>pullData()</code> works more efficiently than <code>sendQuery()</code>. Specific information is illustrated in the next section.</p>
</div>
<div id="an-error-message-from-sendquery" class="section level3">
<h3>An error message from <code>sendQuery()</code></h3>
<p>The aforementioned issue in <code>sendQuery()</code> can occur when the size of requested data is greather than computer’s memory. The error message will suggest a solution such as increasing a memory size of a user’s computer with the original error note provided by R.</p>
<p>This issue is more frequently occured in a Windows machine because of the memory cap the R program is assigned. Once a user has the issue, <code>getQuerySize()</code> should be drawn to estimate data sizes. After comparing the size of data and machine’ RAM, a user may need to increae its maximum.</p>
<p>please see the following examples,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Estimate the data size you want to extract</span>
<span class="kw">getQuerySize</span>(<span class="st">'api_key'</span>, <span class="st">'table_name'</span>,query objecct)

<span class="co"># If the error message is noted, estimate the data a user has requested</span>
<span class="kw">getQuerySize</span>(k, <span class="st">'phoenix_rt'</span>, q)

<span class="co"># Check your memory limit only in the Windows system</span>
<span class="kw">memory.limit</span>()
<span class="co"># Increase its size if you need </span>
<span class="kw">memory.size</span>(<span class="dt">max=</span><span class="dv">120000</span>)   </code></pre></div>
<p> </p>
</div>
</div>
<div id="data-citation-function" class="section level2">
<h2>Data citation function</h2>
<p><code>citeData()</code> function returns the text of citations for journal publication about the Event data from the UTD server. The returned text contains two different type of citations; 1) a text type of citations for a user to copy and paste them to jouranl papers or other documents, and 2) a Bibtex type for users. The input of table names is case-insensitive, but you should have full data table names for the function input.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># citations for Cline Phoenix Event data</span>
<span class="kw">citeData</span>(<span class="dt">table_name =</span> <span class="st">&quot;cline_Phoenix_swb&quot;</span>)

<span class="co"># citations for UTD real-time data </span>
<span class="kw">citeData</span>(<span class="dt">table_name =</span> <span class="st">&quot;Phoenix_rt&quot;</span>)

<span class="co"># citations for ICEWS  </span>
<span class="kw">citeData</span>(<span class="dt">table_name =</span> <span class="st">&quot;ICEWS&quot;</span>)</code></pre></div>
<p> </p>
</div>
</div>
<div id="further-information-of-the-event-data-server-at-utd" class="section level1">
<h1>Further information of the Event Data server at UTD</h1>
<div id="real-time-event-data" class="section level2">
<h2>Real Time Event Data</h2>
<p><a href="http://eventdata.utdallas.edu/">The web-page of the real-time event data project</a><br />
The web portal contains the genral information about the real-time event data project conducted in the University of Texas at Dallas. As the portal site of the project, the basic information of the project and its outcome including related web-links are listed and organized.</p>
</div>
<div id="spec-real-time-server" class="section level2">
<h2>Spec-real-time Server</h2>
<p><a href="https://github.com/Sayeedsalam/spec-event-data-server">The Github page for the API access on Jetstream at UTD</a><br />
This Github page provides specific information of the direct access to the UTD server managed by Big Data Management and Analytic Lab with Mongo DB query syntax. The queries are expressed in JSON format.</p>
</div>
<div id="jetstream" class="section level2">
<h2>Jetstream</h2>
<p><a href="https://portal.xsede.org/jetstream">Jetstream user guide</a><br />
XSEDE user guide provides specific information of the Jetstream usage and its working system. You can explore other information of Jetstream in the linked websites.</p>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
